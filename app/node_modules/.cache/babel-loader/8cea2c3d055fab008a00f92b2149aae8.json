{"ast":null,"code":"import _asyncToGenerator from\"/home/git/SkiffUI/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/git/SkiffUI/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/git/SkiffUI/app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import Homepage from'./Homepage';import RenderGraph from'./RenderGraph';import\"./graph.css\";import{jsx as _jsx}from\"react/jsx-runtime\";var Network=function Network(){// States\nvar _useState=useState(-1),_useState2=_slicedToArray(_useState,2),numDeployments=_useState2[0],setnumDeployments=_useState2[1];var _useState3=useState(-1),_useState4=_slicedToArray(_useState3,2),currIdx=_useState4[0],setCurrIdx=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),deployment=_useState6[0],setDeployment=_useState6[1];var summary=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://serverhackathon.prakshal.repl.co/summary\",{mode:'no-cors',headers:{\"Access-Control-Allow-Origin\":\"*\",'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(response){return setnumDeployments(response[\"count\"]);}).catch(function(error){console.log(error);});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function summary(){return _ref.apply(this,arguments);};}();useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return summary();case 2:case\"end\":return _context2.stop();}}},_callee2);})),[]);var postCommand=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(deployment_index){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"deployment?number=\".concat(deployment_index)).then(function(response){return response.json();}).then(function(response){setDeployment(response);setCurrIdx(deployment_index);}).catch(function(error){console.log(error);});case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function postCommand(_x){return _ref3.apply(this,arguments);};}();if(deployment===null){return/*#__PURE__*/_jsx(Homepage,{setnumDeployments:setnumDeployments,postCommand:postCommand,numDeployments:numDeployments});}return/*#__PURE__*/_jsx(RenderGraph,{initialNodes:deployment.nodes,initialEdges:deployment.edges,setDeployment:setDeployment,currIdx:currIdx,setCurrIdx:setCurrIdx});};export default Network;","map":{"version":3,"sources":["/home/git/SkiffUI/app/src/Network.js"],"names":["React","useState","useEffect","Homepage","RenderGraph","Network","numDeployments","setnumDeployments","currIdx","setCurrIdx","deployment","setDeployment","summary","fetch","mode","headers","then","response","json","catch","error","console","log","postCommand","deployment_index","nodes","edges"],"mappings":"oUAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAO,aAAP,C,2CAGA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB;AACA,cAA4CJ,QAAQ,CAAC,CAAC,CAAF,CAApD,wCAAOK,cAAP,eAAuBC,iBAAvB,eACA,eAA8BN,QAAQ,CAAC,CAAC,CAAF,CAAtC,yCAAOO,OAAP,eAAgBC,UAAhB,eACA,eAAoCR,QAAQ,CAAC,IAAD,CAA5C,yCAAOS,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,CAAAA,OAAO,0FAAG,yJACDC,CAAAA,KAAK,oDAEhB,CACEC,IAAI,CAAE,SADR,CAEEC,OAAO,CAAE,CACL,8BAA+B,GAD1B,CAEL,eAAgB,kBAFX,CAFX,CAFgB,CAAL,CAUVC,IAVU,CAUL,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EAVH,EAWVF,IAXU,CAWL,SAACC,QAAD,QAAcV,CAAAA,iBAAiB,CAACU,QAAQ,CAAC,OAAD,CAAT,CAA/B,EAXK,EAYVE,KAZU,CAYJ,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAdU,CADC,6GAAH,kBAAPR,CAAAA,OAAO,0CAAb,CAkBAV,SAAS,sEAAC,+JACFU,CAAAA,OAAO,EADL,yDAAD,GAEN,EAFM,CAAT,CAIA,GAAMW,CAAAA,WAAW,2FAAG,kBAAOC,gBAAP,6IACLX,CAAAA,KAAK,6BACMW,gBADN,EAAL,CAGVR,IAHU,CAGL,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EAHH,EAIVF,IAJU,CAIL,SAACC,QAAD,CAAc,CAAEN,aAAa,CAACM,QAAD,CAAb,CAAyBR,UAAU,CAACe,gBAAD,CAAV,CAA8B,CAJlE,EAKVL,KALU,CAKJ,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAPU,CADK,iHAAH,kBAAXG,CAAAA,WAAW,6CAAjB,CAWA,GAAIb,UAAU,GAAK,IAAnB,CAAyB,CACvB,mBAAO,KAAC,QAAD,EAAU,iBAAiB,CAAEH,iBAA7B,CAAgD,WAAW,CAAEgB,WAA7D,CAA0E,cAAc,CAAEjB,cAA1F,EAAP,CACD,CAED,mBACE,KAAC,WAAD,EAAa,YAAY,CAAEI,UAAU,CAACe,KAAtC,CAA6C,YAAY,CAAEf,UAAU,CAACgB,KAAtE,CAA6E,aAAa,CAAEf,aAA5F,CAA2G,OAAO,CAAEH,OAApH,CAA6H,UAAU,CAAEC,UAAzI,EADF,CAGD,CA9CD,CAgDA,cAAeJ,CAAAA,OAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Homepage from './Homepage'\nimport RenderGraph from './RenderGraph'\nimport \"./graph.css\"\n\n\nconst Network = () => {\n  // States\n  const [numDeployments, setnumDeployments] = useState(-1);\n  const [currIdx, setCurrIdx] = useState(-1);\n  const [deployment, setDeployment] = useState(null);\n\n  const summary = async () => {\n    return await fetch(\n      (`https://serverhackathon.prakshal.repl.co/summary`),\n      {\n        mode: 'no-cors',\n        headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n            'Content-Type': 'application/json',\n        }\n      }\n    )\n      .then(response => response.json())\n      .then((response) => setnumDeployments(response[\"count\"]))\n      .catch((error) => {\n        console.log(error)\n      })\n  }\n\n  useEffect(async () => {\n    await summary()\n  }, []);\n\n  const postCommand = async (deployment_index) => {\n    return await fetch(\n      (`deployment?number=${deployment_index}`)\n    )\n      .then(response => response.json())\n      .then((response) => { setDeployment(response); setCurrIdx(deployment_index) })\n      .catch((error) => {\n        console.log(error)\n      })\n  }\n\n  if (deployment === null) {\n    return <Homepage setnumDeployments={setnumDeployments} postCommand={postCommand} numDeployments={numDeployments} />;\n  }\n\n  return (\n    <RenderGraph initialNodes={deployment.nodes} initialEdges={deployment.edges} setDeployment={setDeployment} currIdx={currIdx} setCurrIdx={setCurrIdx} />\n  );\n};\n\nexport default Network;\n"]},"metadata":{},"sourceType":"module"}